(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{347:function(e,r,t){e.exports=t.p+"assets/img/1.378e1eb8.png"},502:function(e,r,t){"use strict";t.r(r);var o=t(33),a=Object(o.a)({},(function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"programming-the-nitrokey"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#programming-the-nitrokey"}},[e._v("#")]),e._v(" Programming the Nitrokey")]),e._v(" "),o("p",[e._v("Nitrokey Pro, Start and HSM use the same hardware but different firmwares and different smart cards. The microprocessor being used is a "),o("a",{attrs:{href:"http://www.st.com/internet/mcu/product/164488.jsp",target:"_blank",rel:"noopener noreferrer"}},[e._v("STM32F103R8T6"),o("OutboundLink")],1),e._v(". The firmware is written in C, the desktop software Nitrokey App is written in C/C++. You find all software sources and hardware layouts at "),o("a",{attrs:{href:"https://github.com/nitrokey",target:"_blank",rel:"noopener noreferrer"}},[e._v("Github"),o("OutboundLink")],1),e._v(".")]),e._v(" "),o("p",[e._v("To develop the firmware of the Nitrokey Pro/Start/HSM you would need:")]),e._v(" "),o("ul",[o("li",[o("p",[e._v("An original Nitrokey Pro/Start/HSM or better a development board such as the "),o("a",{attrs:{href:"https://www.olimex.com/Products/ARM/ST/STM32-H103/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Olimex STM32-H103"),o("OutboundLink")],1),e._v(". Alternatively, get any other development board equipped with a STM32F103TB and 128KB flash. On request you can get a Nitrokey for development purposes from us.")])]),e._v(" "),o("li",[o("p",[e._v("An "),o("a",{attrs:{href:"https://www.assembla.com/wiki/show/cryptostick/OpenPGP",target:"_blank",rel:"noopener noreferrer"}},[e._v("OpenPGP"),o("OutboundLink")],1),e._v(" Card 2.1 available at "),o("a",{attrs:{href:"http://shop.kernelconcepts.de/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Kernel Concepts"),o("OutboundLink")],1),e._v(" or on request from us. (Of course, this is not necessary for Nitrokey Start which doesn't contain a smart card.)\nIf you use it with original Nitrokey hardware, you would need to cut it to Micro-SIM size. This can be done by using a special SIM card cutter or even with a scissor.\nIf you use a development board, you may solder the OpenPGP Card to the board directly by using some wires or you get yourself a smart card jack which you solder to the dev board instead.")])]),e._v(" "),o("li",[o("p",[e._v("To compile the firmware we recommend "),o("a",{attrs:{href:"https://launchpad.net/gcc-arm-embedded/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ARM's official GNU tools"),o("OutboundLink")],1),e._v(".")])]),e._v(" "),o("li",[o("p",[e._v("The microprocessor can be flashed with two different approaches:")]),e._v(" "),o("ol",[o("li",[e._v("SWD is a STM-specific protocol and similar to JTAG allowing programming and debugging. Working adapters are Versaloon or any of the "),o("a",{attrs:{href:"http://www.ebay.com/sch/i.html?_odkw=st-link&_osacat=0&_from=R40&_trksid=p2045573.m570.l1313.TR0.TRC0.H0.Xst-link+v2&_nkw=st-link+v2&_sacat=0",target:"_blank",rel:"noopener noreferrer"}},[e._v("ST-Link V2 (clones)"),o("OutboundLink")],1),e._v(". Under Linux you could give a patched "),o("a",{attrs:{href:"https://github.com/snowcap-electronics/OpenOCD",target:"_blank",rel:"noopener noreferrer"}},[e._v("OpenOCD"),o("OutboundLink")],1),e._v(" a try but in the past it has been very troublesome. This approach requires to solder wires to the contact pads or to use an "),o("a",{attrs:{href:"https://github.com/Nitrokey/nitrokey-pro-hardware/tree/master/cs_pogo_adapter",target:"_blank",rel:"noopener noreferrer"}},[e._v("adapter with pogo pins"),o("OutboundLink")],1),e._v(" and some kind of mounting (recommended).")])]),e._v(" "),o("p",[o("img",{attrs:{src:t(347),alt:"img1"}})]),e._v(" "),o("ol",{attrs:{start:"2"}},[o("li",[e._v("DFU is a simple protocol via serial port which allows programming but no debugging. On the Nitrokey hardware we expose the appropriate pins over the USB connector but it's not USB! Details are described in the next chapter.")])])])]),e._v(" "),o("h2",{attrs:{id:"flashing-the-nitrokey-pro"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#flashing-the-nitrokey-pro"}},[e._v("#")]),e._v(" Flashing the Nitrokey Pro")]),e._v(" "),o("p",[e._v("Further information about flashing the device can be found at the "),o("a",{attrs:{href:"https://github.com/Nitrokey/nitrokey-pro-firmware",target:"_blank",rel:"noopener noreferrer"}},[e._v("Github repository of the Nitrokey Pro"),o("OutboundLink")],1),e._v(".")])])}),[],!1,null,null,null);r.default=a.exports}}]);